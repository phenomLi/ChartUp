"use strict";var __extends=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ChartUp=function(t){var i={defaultColor:"#000",edge:[20,20],interval:10},e=function(t){return Math.PI*(t/180)},n=function(t){return Math.max.apply(Math,t)},s=function(t){return Math.min.apply(Math,t)},o=function(){function t(t,i,e,n){this.g=null,this.currentPoint=[],this.color="",this.g=t,this.color=n,this.color&&(this.g.strokeStyle=this.color),this.g.beginPath(),this.g.moveTo(i,e),this.currentPoint=[i,e]}return t.prototype.reLine=function(t){this.color=t,this.g.stroke(),this.g.strokeStyle=this.color,this.g.beginPath(),this.g.moveTo(this.currentPoint[0],this.currentPoint[1])},t.prototype.next=function(t,i,e){return e&&this.reLine(e),this.g.lineTo(t,i),this.currentPoint=[t,i],this},t.prototype.paint=function(t){return this.g.stroke(),t.render(this.currentPoint[0],this.currentPoint[1],this.color),this.g.beginPath(),this.g.moveTo(this.currentPoint[0],this.currentPoint[1]),this},t.prototype.end=function(t,i,e,n){return void 0===e&&(e=!1),n&&this.reLine(n),e&&(this.g.fillStyle=n),this.g.lineTo(t,i),this.currentPoint=[t,i],e?this.g.fill():this.g.stroke(),this},t}(),r=function(){function t(t,i,n,s){void 0===s&&(s=!0),this.g=null,this.radius=0,this.startAngle=0,this.endAngle=0,this.isSoild=!0,this.x=0,this.y=0,this.isDrawCircle=!1,this.g=t,this.radius=i,this.startAngle=0,this.endAngle=e(n),this.isSoild=s,360===n&&(this.isDrawCircle=!0)}return t.prototype.next=function(t,i){return this.startAngle=this.endAngle,this.endAngle=this.endAngle+e(t),this.render(this.x,this.y,i),this},t.prototype.render=function(t,i,e){return this.x=t,this.y=i,e&&(this.isSoild?this.g.fillStyle=e:this.g.strokeStyle=e),this.g.beginPath(),!this.isDrawCircle&&this.g.moveTo(this.x,this.y),this.g.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle),this.g.closePath(),this.isSoild?this.g.fill():this.g.stroke(),this},t}(),h=function(){function t(t,i,e,n){void 0===n&&(n=!0),this.g=null,this.width=0,this.height=0,this.isSoild=!0,this.g=t,this.isSoild=n,this.width=i,this.height=e}return t.prototype.render=function(t,i,e){e&&(this.isSoild?this.g.fillStyle=e:this.g.strokeStyle=e),this.g.beginPath(),this.g.rect(t,i,this.width,this.height),this.isSoild?this.g.fill():this.g.stroke()},t}(),a=function(){function t(t,i,e){this.g=null,this.config=null,this.items=[],this.margin=45,this.oX=0,this.oY=0,this.xOrigin=0,this.yOrigin=0,this.lX=0,this.lY=0,this.xEdge=0,this.yEdge=0,this.rxEdge=0,this.ryEdge=0,this.rxIntervals=[],this.ryIntervals=[],this.xIntervals=[],this.yIntervals=[],this.xCount=0,this.yCount=0,this.xInterval=0,this.yInterval=0,this.g=t,this.config=i,this.items=e,this.oX=this.margin,this.oY=this.config.canvasHeight-this.margin,this.lX=this.config.canvasWidth-this.oX-20-this.margin,this.lY=this.oY-this.margin-20,this.rxEdge=this.oX+this.lX,this.ryEdge=this.oY-this.lY,this.xInterval=this.config.interval[0]?this.config.interval[0]:1,this.yInterval=this.config.interval[1]?this.config.interval[1]:this.config.interval;var n=this.getMax(this.items,"x"),s=this.getMax(this.items,"y"),o=Math.ceil(this.getMin(this.items,"x")),r=Math.ceil(this.getMin(this.items,"y"));this.xOrigin=o,this.yOrigin=r;var h=n-this.xOrigin,a=s-this.yOrigin;this.xCount=Math.floor(h/this.xInterval)+1,this.yCount=Math.floor(a/this.yInterval)+1,this.xEdge=this.xInterval*this.xCount+this.xOrigin,this.yEdge=this.yInterval*this.yCount+this.yOrigin;for(l=1;l<=this.xCount;l++){c=l*(this.lX/this.xCount);this.rxIntervals.push(this.oX+c),this.yIntervals.push(l*this.xInterval+this.xOrigin)}for(var l=1;l<=this.yCount;l++){var c=l*(this.lY/this.yCount);this.ryIntervals.push(this.oY-c),this.yIntervals.push(l*this.yInterval+this.yOrigin)}}return t.prototype.baseLineX=function(){var t=this.calc(0,0).y,i=this.calc(this.xOrigin,0).x;return this.g.save(),this.yOrigin<0&&new o(this.g,i,t,"#666").end(this.rxEdge,t),this.g.restore(),this},t.prototype.baseLineY=function(){var t=this.calc(0,0).x,i=this.calc(0,this.yOrigin).y;return this.g.save(),this.xOrigin<0&&new o(this.g,t,i,"#666").end(t,this.ryEdge),this.g.restore(),this},t.prototype.rightAngle=function(){return new o(this.g,this.margin,this.margin).next(this.oX,this.oY).end(this.config.canvasWidth-this.margin,this.oY),this},t.prototype.setXIntervalPoint=function(){this.coordinateSystemText("("+this.xOrigin+", "+this.yOrigin+")",this.oX,this.oY+15);for(var t=1;t<=this.xCount;t++){var i=t*(this.lX/this.xCount);new o(this.g,this.oX+i,this.oY).end(this.oX+i,this.oY+5),this.coordinateSystemText(t*this.xInterval+this.xOrigin,this.oX+i,this.oY+15)}return this},t.prototype.setYIntervalPoint=function(){for(var t=1;t<=this.yCount;t++){var i=t*(this.lY/this.yCount);new o(this.g,this.oX-5,this.oY-i).end(this.oX,this.oY-i),this.coordinateSystemText(t*this.yInterval+this.yOrigin,this.oX-15,this.oY-i)}return this},t.prototype.coordinateSystemText=function(t,i,e){this.g.save(),this.g.textAlign="center",this.g.textBaseline="middle",this.g.fillText(t,i,e),this.g.restore()},t.prototype.calc=function(t,i){return{x:this.oX+(t-this.xOrigin)*this.lX/(this.xEdge-this.xOrigin),y:this.oY-(i-this.yOrigin)*this.lY/(this.yEdge-this.yOrigin)}},t.prototype.getMax=function(t,e){var s="x"===e?0:1;if(0===t.length)return i.edge[s];if("BaseChart"===this.config.chartType||"PointChart"===this.config.chartType)return n(t.map(function(t){return"function"==typeof t.points?i.edge[s]:n(t.points.map(function(t){return t[s]}))}));if("AreaChart"===this.config.chartType){for(var o=[],r=0,h=0;h<this.config.length;h++){for(var a=0;a<this.items.length;a++)r=this.items[a].value[h]+r;o.push(r),r=0}return n(o)}return n(this.items.map(function(t){return n(t.value)}))},t.prototype.getMin=function(t,i){var e="x"===i?0:1;if(0===t.length)return 0;if("BaseChart"===this.config.chartType||"PointChart"===this.config.chartType)return s(t.map(function(t){return"function"==typeof t.points?0:s(t.points.map(function(t){return t[e]}))}));if("AreaChart"===this.config.chartType)return s(t[0].value);var n=s(this.items.map(function(t){return s(t.value)}));return n>0?0:n-Math.abs(n)},t}(),l=function(){function t(t,i,e){this.g=null,this.config=null,this.items=null,this.oX=0,this.oY=0,this.angleList=[],this.edge=0,this.max=0,this.count=0,this.g=t,this.config=i,this.items=e,this.oX=this.config.centerX,this.oY=this.config.centerY,this.max=this.getMax(this.items),this.count=Math.floor(this.max/this.config.interval)+1,this.edge=this.count*this.config.interval}return t.prototype.getAngleValue=function(t,i){var e=this,n=[],s=0,o=2*Math.PI/t.length,r=Math.PI/2;return t.map(function(t,h){s=h*o,0===h?n.push({x:e.oX,y:e.oY+i}):n.push({x:e.oX+i*Math.cos(s+r),y:e.oY+i*Math.sin(s+r)})}),n},t.prototype.drawPolygon=function(){for(var t=[],i=0,e=null,n=0;n<this.count;n++){i=(this.edge-n*this.config.interval)*this.config.defaultRadius/this.edge,t=this.getAngleValue(this.config.index,i);for(var s=0;s<t.length;s++)e=s===t.length-1?e.next(t[s].x,t[s].y).end(t[0].x,t[0].y):0===s?new o(this.g,t[s].x,t[s].y,"#ddd"):e.next(t[s].x,t[s].y);0===n&&(this.angleList=t)}return this},t.prototype.fillPolygon=function(){var t=[],i=0,e=null;this.g.save();for(var n=0;n<this.count;n++){i=(this.edge-n*this.config.interval)*this.config.defaultRadius/this.edge,t=this.getAngleValue(this.config.index,i),this.g.fillStyle=n%2?"#eee":"#fff";for(var s=0;s<t.length;s++)e=s===t.length-1?e.next(t[s].x,t[s].y).end(t[0].x,t[0].y,n>0):0===s?new o(this.g,t[s].x,t[s].y,"#ddd"):e.next(t[s].x,t[s].y)}return this.g.restore(),this},t.prototype.drawRay=function(){var t=this;return this.angleList.map(function(i){new o(t.g,t.oX,t.oY,"#ddd").end(i.x,i.y)}),this},t.prototype.drawText=function(){var t=this;return this.g.save(),this.g.textAlign="center",this.angleList.map(function(i,e){var n=i.x,s=i.y;i.x>t.oX&&(n=i.x+35),i.x<t.oX&&(n=i.x-35),i.y>t.oY&&(s=i.y+35),i.y<t.oY&&(s=i.y-35),t.g.fillText(t.config.index[e],n,s)}),this.g.restore(),this},t.prototype.getMax=function(t){return 0===t.length?i.edge[0]:n(t.map(function(t){return n(t.value)}))},t.prototype.calc=function(t,i,e){return{}},t.prototype.render=function(){this.fillPolygon().drawPolygon().drawRay().drawText()},t}(),c=function(){},g=function(){function t(t,i){return this.g=null,this.config=null,this.data=[],this.itemList=[],this.defaultRadius=3,this.defaultInterval=10,this.coordinateSystem=null,this.items=[],this.g=t,this.config=i,this.config.grid=void 0===this.config.grid||this.config.grid,this.config.measureLine=void 0===this.config.measureLine||this.config.measureLine,this.config.interval?this.config.items?(this.config.defaultRadius&&(this.defaultRadius=this.config.defaultRadius),this.bindMouseEvent(),void this.indexItem(this.config.items)):(console.warn("'items' option is required."),null):(console.warn("'interval' option is required."),null)}return t.prototype.indexItem=function(t){return t.map(function(t,i){t.index=i}),this},t.prototype.render=function(t){var i=this;return this.items=[],this.data=[],t?t.map(function(t){i.config.items.map(function(e){e.label===t&&i.items.push(e)})}):this.items=this.config.items,this.items.sort(function(t,i){return t.index-i.index}),this.g.clearRect(0,0,this.config.canvasWidth,this.config.canvasHeight),this.coordinateSystem=new a(this.g,this.config,this.items),this.itemList=t,this.items.map(function(t,e){i.data.push({ele:i.analyseItems(t,e),color:t.color,label:t.label})}),this.reRender(0,0),this},t.prototype.reRender=function(t,i){this.g.save(),this.paintGrid().drawCoordinateSystem().renderResult(this.data).paintTargetLineX(t,i).paintTargetLineY(t,i).paintTipCase(t,i,this.mouseSelect(this.data,t,i)),this.g.restore()},t.prototype.paintGrid=function(){return this.g.save(),this.config.grid&&this.drawGridX().drawGridY(),this.g.restore(),this},t.prototype.drawCoordinateSystem=function(){return this.coordinateSystem.rightAngle().setXIntervalPoint().setYIntervalPoint().baseLineX().baseLineY(),this},t.prototype.drawGridX=function(){for(var t=this.coordinateSystem.rxIntervals.length,i=this.coordinateSystem.ryEdge,e=0;e<t;e++)new o(this.g,this.coordinateSystem.rxIntervals[e],this.coordinateSystem.oY,"#eee").end(this.coordinateSystem.rxIntervals[e],i);return this},t.prototype.drawGridY=function(){for(var t=this.coordinateSystem.ryIntervals.length,i=this.coordinateSystem.rxEdge,e=0;e<t;e++)new o(this.g,this.coordinateSystem.oX,this.coordinateSystem.ryIntervals[e],"#eee").end(i,this.coordinateSystem.ryIntervals[e]);return this},t.prototype.isInChart=function(t,i){return t>this.coordinateSystem.oX&&t<this.coordinateSystem.rxEdge&&i<this.coordinateSystem.oY&&i>this.coordinateSystem.ryEdge},t.prototype.bindMouseEvent=function(){var t=this;return this.config.canvas.addEventListener("mousemove",function(i){var e=i.clientX-t.config.canvas.getBoundingClientRect().left,n=i.clientY-t.config.canvas.getBoundingClientRect().top;t.g.clearRect(0,0,t.config.canvasWidth,t.config.canvasHeight),t.reRender(e,n)}),this},t.prototype.mouseSelect=function(t,i,e){var n=this,s=null;return t.map(function(t){"function"!=typeof t.ele&&t.ele.map(function(o){n.g.beginPath(),n.g.arc(o.x,o.y,o.r+2,0,2*Math.PI),n.g.isPointInPath(i,e)&&(n.g.save(),n.g.shadowOffsetX=1,n.g.shadowOffsetY=1,n.g.shadowBlur=2,n.g.shadowColor="rgba(0, 0, 0, 0.5)",n.g.fillStyle=t.color,n.g.fill(),n.g.restore(),s=o)})}),s},t.prototype.paintTargetLineY=function(t,i){var e=this.coordinateSystem.yOrigin+Math.abs(i-this.config.canvasHeight+45)*(this.coordinateSystem.yEdge-this.coordinateSystem.yOrigin)/this.coordinateSystem.lY;return this.g.save(),this.g.setLineDash([4,2]),this.isInChart(t,i)&&this.config.measureLine&&(new o(this.g,this.coordinateSystem.oX,i,"rgba(0, 0, 0, 0.2)").end(this.coordinateSystem.rxEdge,i),this.g.fillStyle="rgba(0, 0, 0, 0.7)",this.g.rect(this.coordinateSystem.oX+5,i-21,70,18),this.g.fill(),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText("y: "+e.toFixed(3),this.coordinateSystem.oX+10,i-9)),this.g.restore(),this},t.prototype.paintTargetLineX=function(t,i){var e=this.coordinateSystem.xOrigin+(t-45)*(this.coordinateSystem.xEdge-this.coordinateSystem.xOrigin)/this.coordinateSystem.lX;return this.g.save(),this.g.setLineDash([4,2]),this.isInChart(t,i)&&this.config.measureLine&&(new o(this.g,t,this.coordinateSystem.ryEdge,"rgba(0, 0, 0, 0.2)").end(t,this.coordinateSystem.oY),this.g.fillStyle="rgba(0, 0, 0, 0.7)",this.g.rect(t+5,this.coordinateSystem.oY-21,70,18),this.g.fill(),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText("x: "+e.toFixed(3),t+10,this.coordinateSystem.oY-8)),this.g.restore(),this},t.prototype.paintTipCase=function(t,i,e){this.coordinateSystem.xOrigin,this.coordinateSystem.xEdge,this.coordinateSystem.xOrigin,this.coordinateSystem.lX,this.coordinateSystem.yOrigin,Math.abs(i-this.config.canvasHeight+45),this.coordinateSystem.yEdge,this.coordinateSystem.yOrigin,this.coordinateSystem.lY;return this.isInChart(t,i)&&(this.g.fillStyle="rgba(0, 0, 0, 0.7)",t+90>this.coordinateSystem.rxEdge&&(t=this.coordinateSystem.rxEdge-90),e&&(this.g.fillRect(t+10,i+10,80,40),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText("x: "+e.cx.toFixed(3),t+15,i+25),this.g.fillText("y: "+e.cy.toFixed(3),t+15,i+40))),this},t.prototype.analyseItems=function(t,i){var e=this,n=[];return"function"==typeof t.points?t.points:(t.points.map(function(t,i){var s=e.coordinateSystem.calc(t[0],t[1]);n.push({x:s.x,y:s.y,cx:t[0],cy:t[1],r:3})}),n)},t.prototype.renderPoints=function(t,i){for(var e=new r(this.g,this.defaultRadius,360),n=new o(this.g,t[0].x,t[0].y,i).paint(e),s=1,h=t.length;s<h;s++)s===h?n.next(t[s].x,t[s].y).paint(e):n.end(t[s].x,t[s].y).paint(e)},t.prototype.renderExpression=function(t,i){for(var e=this.coordinateSystem.xOrigin,n=this.coordinateSystem.calc(e,t(e)),s=new o(this.g,n.x,n.y,i);e<this.coordinateSystem.xEdge;)e+=.02,n=this.coordinateSystem.calc(e,t(e)),e>this.coordinateSystem.xEdge||t(e)>this.coordinateSystem.yEdge||t(e)<this.coordinateSystem.yOrigin||e<this.coordinateSystem.xOrigin?s.next(n.x,n.y,"transparent"):s.next(n.x,n.y,i);s.end(n.x,n.y)},t.prototype.renderResult=function(t){var i=this;return t.map(function(t){"function"==typeof t.ele?i.renderExpression(t.ele,t.color):i.renderPoints(t.ele,t.color)}),this},t}(),u=function(t){function i(i,e){return t.call(this,i,e)||this}return __extends(i,t),i.prototype.getRadius=function(t){var i=this,e=[],n=0;return t.map(function(t){t&&e.push(t)}),n=e.length?s(e):1,(t=t.map(function(t){return void 0===t&&(t=n),t})).map(function(t){return Math.sqrt(t/n)*i.defaultRadius})},i.prototype.analyseItems=function(t,i){var e=this,n=this.getRadius(t.points.map(function(t){return t[2]})),s=[];return t.points.map(function(t,i){var o=e.coordinateSystem.calc(t[0],t[1]);s.push({x:o.x,y:o.y,r:n[i],w:t[2],cx:t[0],cy:t[1]})}),s},i.prototype.renderResult=function(t){var i=this;return this.g.save(),this.g.shadowOffsetX=1,this.g.shadowOffsetY=1,this.g.shadowBlur=2,this.g.shadowColor="rgba(0, 0, 0, 0.5)",t.map(function(t){t.ele.map(function(e){new r(i.g,e.r,360).render(e.x,e.y,t.color)})}),this.g.restore(),this},i.prototype.paintTipCase=function(t,i,e){this.coordinateSystem.xEdge,this.coordinateSystem.xOrigin,this.coordinateSystem.lX,Math.abs(i-this.config.canvasHeight+45),this.coordinateSystem.yEdge,this.coordinateSystem.yOrigin,this.coordinateSystem.lY;return this.g.fillStyle="rgba(0, 0, 0, 0.7)",t+90>this.coordinateSystem.rxEdge&&(t=this.coordinateSystem.rxEdge-90),this.isInChart(t,i)&&e&&(this.g.fillRect(t+10,i+10,80,55),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText("x: "+e.cx.toFixed(3),t+15,i+25),this.g.fillText("y: "+e.cy.toFixed(3),t+15,i+40),this.g.fillText("weight: "+(e.w?e.w:"none"),t+15,i+55)),this},i}(g),f=function(t){function i(i,e){var n=t.call(this,i,e)||this;return n.length=0,n.interval=0,n.defaultRadius=4.5,void 0===n.config.xAxis?(console.warn("'xAxis' option is required."),null):(n.length=n.config.xAxis.length,n.config.length=n.length,n.checkDataIsComplete(n.config.items),n)}return __extends(i,t),i.prototype.reRender=function(t,i){this.g.save(),this.drawXaxis().paintGrid().drawCoordinateSystem().renderResult(this.data).paintTargetLineY(t,i).paintTipCase(t,i,this.mouseSelect(this.data,t,i)),this.g.restore()},i.prototype.checkDataIsComplete=function(t){var i=this,e=0;return t.map(function(t){if((e=i.length-t.value.length)>0)for(;e--;)t.value.push(0)}),this},i.prototype.analyseItems=function(t,i){var e=this,n=[];return t.value.map(function(t,s){var o=e.data.length>0?e.data[i-1].ele[s].cy+t:t,r=e.coordinateSystem.calc(0,o);n.push({y:r.y,cy:o,count:t})}),n},i.prototype.paintTipCase=function(t,i,e){var n=this,s=0;return t+90>this.coordinateSystem.rxEdge+20&&(t=this.coordinateSystem.rxEdge-70),this.isInChart(t,i)&&(this.g.fillStyle="rgba(0, 0, 0, 0.7)",e&&(this.g.fillRect(t+15,i,80,35+20*this.items.length),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText(e.xLabel,t+20,i+15),e.points.map(function(e,o){n.g.fillText(e.label+": "+e.p.count,t+20,18+i+17*(o+1)),s+=e.p.count}),this.g.fillText("total: "+s,t+20,i+25+20*this.items.length),s=0)),this},i.prototype.mouseSelect=function(t,i,e){var n=this,s=null;return this.g.strokeStyle="#000",this.g.setLineDash([4,2]),this.g.strokeStyle="#666",this.items.length&&t[0].ele.map(function(h,a){n.g.beginPath(),n.g.rect(h.x-n.interval/2,n.coordinateSystem.ryEdge,n.interval,n.coordinateSystem.lY),n.g.isPointInPath(i,e)&&(new o(n.g,h.x,n.coordinateSystem.ryEdge).end(h.x,n.coordinateSystem.oY),t.map(function(t){return{p:t.ele[a],color:t.color}}).map(function(t){new r(n.g,Math.floor(1.4*n.defaultRadius),360).render(t.p.x,t.p.y,t.color)}),s={points:t.map(function(t){return{p:t.ele[a],label:t.label}}),xLabel:n.config.xAxis[a]})}),s},i.prototype.paintGrid=function(){return this.g.save(),this.config.grid&&this.drawGridY(),this.g.restore(),this},i.prototype.drawCoordinateSystem=function(){return this.coordinateSystem.rightAngle().setYIntervalPoint().baseLineX(),this},i.prototype.drawXaxis=function(){var t=this,i=this.coordinateSystem.lX/(this.length-1);return this.interval=i,this.g.save(),this.g.textAlign="center",this.config.xAxis.map(function(e,n){var s=t.coordinateSystem.oX+n*i;new o(t.g,s,t.coordinateSystem.oY).end(s,t.coordinateSystem.oY+5),t.data.map(function(t){t.ele[n].x=s}),t.g.fillText(e,s,t.coordinateSystem.oY+25)}),this.g.restore(),this},i.prototype.renderResult=function(t){var i=this;this.g.save();for(var e=0;e<t.length;e++)for(var n=null,s=t[e],h=e>0?t[e-1]:s,a=0;a<s.ele.length;a++){var l=s.ele[a],c=h.ele[a];if(this.g.fillStyle=s.color,this.g.globalAlpha=.5,0===e)n=0===a?new o(this.g,this.coordinateSystem.oX,this.coordinateSystem.oY,h.color).next(c.x,c.y):a===h.ele.length-1?n.next(c.x,c.y).end(this.coordinateSystem.rxEdge,this.coordinateSystem.oY,!0):n.next(c.x,c.y);else if(0===a)n=new o(this.g,c.x,c.y,s.color).next(l.x,l.y);else if(a===s.ele.length-1){n=n.next(l.x,l.y);for(var g=h.ele.length-1;g>=0;g--)n=n.next(h.ele[g].x,h.ele[g].y);n.end(s.ele[0].x,s.ele[0].y,!0)}else n=n.next(l.x,l.y)}return this.g.restore(),t.map(function(t){t.ele.map(function(e){new r(i.g,i.defaultRadius,360).render(e.x,e.y,t.color)})}),this},i}(g),d=function(t){function e(i,e){var n=t.call(this,i,e)||this;return n.width=0,n.config.trendLine=void 0!==n.config.trendLine&&n.config.trendLine,n}return __extends(e,t),e.prototype.analyseItems=function(t,i){var e=this,n=[];return this.interval=this.coordinateSystem.lX/this.length,this.width=this.interval/(2*this.items.length+1),t.value.map(function(t,s){var o=e.coordinateSystem.oX+s*e.interval+e.width*(2*i+1),r=e.coordinateSystem.oY-e.coordinateSystem.calc(0,t).y;n.push({x:o,y:e.coordinateSystem.oY-r,width:e.width,height:r,value:t})}),n},e.prototype.paintTipCase=function(t,i,e){var n=this;return t+90>this.coordinateSystem.rxEdge+20&&(t=this.coordinateSystem.rxEdge-70),this.isInChart(t,i)&&(this.g.fillStyle="rgba(0, 0, 0, 0.7)",e.data.length&&(this.g.fillRect(t+15,i,80,25+20*this.items.length),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText(e.xLabel,t+20,i+15),e.data.map(function(e,s){n.g.fillText(e.label+": "+e.value,t+20,i+35+20*s)}))),this},e.prototype.mouseSelect=function(t,e,n){var s={data:[],xLabel:""};if(this.items.length)for(var o=function(o){var h=r.coordinateSystem.oX+o*r.interval;r.g.beginPath(),r.g.rect(h,r.coordinateSystem.ryEdge,r.interval,r.coordinateSystem.lY),r.g.isPointInPath(e,n)&&(r.g.save(),r.g.fillStyle=i.defaultColor,r.g.globalAlpha=.1,r.g.fill(),t.map(function(t){s.data.push({value:t.ele[o].value,label:t.label})}),s.xLabel=r.config.xAxis[o],r.g.restore())},r=this,h=0;h<this.length;h++)o(h);return s},e.prototype.drawXaxis=function(){var t=this,i=this.interval;return this.g.save(),this.g.textAlign="center",this.config.xAxis.map(function(e,n){var s=t.coordinateSystem.oX+n*i;new o(t.g,s,t.coordinateSystem.oY).end(s,t.coordinateSystem.oY+5),t.g.fillText(e,s+i/2,t.coordinateSystem.oY+25)}),this.g.restore(),this},e.prototype.renderResult=function(t){var i=this;return t.map(function(t,e){t.ele.map(function(e,n){new h(i.g,e.width,e.height).render(e.x,e.y,t.color)})}),this},e}(f),y=function(t){function i(i,e){return t.call(this,i,e)||this}return __extends(i,t),i.prototype.drawXaxis=function(){var t=this,i=this.interval;return this.g.save(),this.g.textAlign="center",this.config.xAxis.map(function(e,n){var s=t.coordinateSystem.oX+(n+1)*i;new o(t.g,s,t.coordinateSystem.oY).end(s,t.coordinateSystem.oY+5),t.data.map(function(t){t.ele[n].x=s}),t.g.fillText(e,s,t.coordinateSystem.oY+25)}),this.g.restore(),this},i.prototype.analyseItems=function(t,i){var e=this,n=[];return this.interval=this.coordinateSystem.lX/(this.length+1),t.value.map(function(t,i){var s=e.coordinateSystem.calc(0,t),o=e.coordinateSystem.oX+e.interval+e.interval*i;n.push({x:o,y:s.y,value:t})}),n},i.prototype.paintTipCase=function(t,i,e){var n=this;return t+90>this.coordinateSystem.rxEdge+20&&(t=this.coordinateSystem.rxEdge-70),this.isInChart(t,i)&&(this.g.fillStyle="rgba(0, 0, 0, 0.7)",e&&(this.g.fillRect(t+15,i,80,20+20*this.items.length),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText(e.xLabel,t+20,i+15),e.points.map(function(e,s){n.g.fillText(e.label+": "+e.p.value,t+20,18+i+17*(s+1))}))),this},i.prototype.renderResult=function(t){var i=this,e=null,n=new r(this.g,this.defaultRadius,360);return t.map(function(t,s){t.ele.map(function(s,r){(e=0===r?new o(i.g,s.x,s.y,t.color):r===t.ele.length-1?e.end(s.x,s.y):e.next(s.x,s.y)).paint(n)})}),this},i}(f),p=function(){function t(t,i){this.g=null,this.config=null,this.items=[],this.itemList=[],this.data=[],this.radius=120,this.centerPoint=[],this.total=0,this.g=t,this.config=i,this.config.radius=void 0===this.config.radius?this.radius:this.config.radius,this.centerPoint=[this.config.canvasWidth/2,this.config.canvasHeight/2],this.bindMouseEvent(),this.indexItem(this.config.items)}return t.prototype.sortItem=function(t){return t.sort(function(t,i){return t.value-i.value}),this},t.prototype.indexItem=function(t){return t.map(function(t,i){t.index=i}),this},t.prototype.analyseItems=function(t,i){return{value:t.value,angle:360*t.value/this.total,ratio:(t.value/this.total*100).toFixed(1)+"%"}},t.prototype.bindMouseEvent=function(){var t=this;return this.config.canvas.addEventListener("mousemove",function(i){var e=i.clientX-t.config.canvas.getBoundingClientRect().left,n=i.clientY-t.config.canvas.getBoundingClientRect().top;t.g.clearRect(0,0,t.config.canvasWidth,t.config.canvasHeight),t.reRender(e,n)}),this},t.prototype.renderResult=function(t){var i=this,n=null,s=0,o=0;return this.g.save(),t.map(function(t){n=n?n.next(t.ele.angle,t.color):new r(i.g,i.config.radius,t.ele.angle).render(i.centerPoint[0],i.centerPoint[1],t.color)}),this.g.strokeStyle="#fff",this.g.lineWidth=1.5,t.map(function(t,n){0===n?(s=0,o=t.ele.angle):o=(s=o)+t.ele.angle,i.g.beginPath(),i.g.moveTo(i.centerPoint[0],i.centerPoint[1]),i.g.arc(i.centerPoint[0],i.centerPoint[1],i.config.radius,e(s),e(o)),i.g.closePath(),i.g.stroke()}),this.g.restore(),this},t.prototype.isInCircle=function(t,i){return this.g.beginPath(),this.g.arc(this.centerPoint[0],this.centerPoint[1],this.config.radius,0,2*Math.PI),this.g.isPointInPath(t,i)},t.prototype.paintTipCase=function(t,i,e){return this.isInCircle(t,i)&&(this.g.fillStyle="rgba(0, 0, 0, 0.5)",e&&(this.g.fillRect(t,i-60,110,50),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText("lable: "+e.label,t+10,i-45),this.g.fillText("data: "+e.ele.value,t+10,i-30),this.g.fillText("ratio: "+e.ele.ratio,t+10,i-15))),this},t.prototype.mouseSelect=function(t,i,n){var s=this,o=null,r=0,h=0;return t.map(function(t,a){s.g.save(),s.g.fillStyle=t.color,0===a?(r=0,h=t.ele.angle):h=(r=h)+t.ele.angle,s.g.beginPath(),s.g.moveTo(s.centerPoint[0],s.centerPoint[1]),s.g.arc(s.centerPoint[0],s.centerPoint[1],s.config.radius+.15*s.config.radius,e(r),e(h)),s.g.closePath(),s.g.isPointInPath(i,n)&&(s.g.shadowOffsetX=2,s.g.shadowOffsetY=2,s.g.shadowBlur=8,s.g.shadowColor="rgba(0, 0, 0, 0.5)",s.g.fill(),o=t),s.g.restore()}),o},t.prototype.reRender=function(t,i){this.g.save(),this.renderResult(this.data).paintTipCase(t,i,this.mouseSelect(this.data,t,i)),this.g.restore()},t.prototype.render=function(t){var i=this;return this.items=[],this.data=[],t?t.map(function(t){i.config.items.map(function(e){e.label===t&&i.items.push(e)})}):this.items=this.config.items,this.sortItem(this.items),this.g.clearRect(0,0,this.config.canvasWidth,this.config.canvasHeight),this.itemList=t,this.total=function(t){return t.length?t.reduce(function(t,i,e,n){return t+i}):0}(this.items.map(function(t){return t.value})),this.items.map(function(t,e){i.data.push({ele:i.analyseItems(t,e),color:t.color,label:t.label})}),this.reRender(0,0),this},t}(),m=function(t){function i(i,e){var n=t.call(this,i,e)||this;return n.width=65,n.config.width=void 0===n.config.width?n.width:n.config.width,n}return __extends(i,t),i.prototype.drawCenterCircle=function(){return new r(this.g,this.config.radius-this.config.width,360).render(this.centerPoint[0],this.centerPoint[1],"#fff"),this},i.prototype.mouseSelect=function(t,i,n){var s=this,o=null,r=0,h=0;return this.g.strokeStyle="#000",t.map(function(t,a){0===a?(r=0,h=t.ele.angle):h=(r=h)+t.ele.angle,s.isInAnnular(i,n)&&(s.g.beginPath(),s.g.moveTo(s.centerPoint[0],s.centerPoint[1]),s.g.arc(s.centerPoint[0],s.centerPoint[1],s.config.radius,e(r),e(h)),s.g.closePath(),s.g.isPointInPath(i,n)&&(s.g.save(),s.g.globalAlpha=.5,s.g.fill(),o=t,s.g.restore()))}),o},i.prototype.isInAnnular=function(t,i){var e=!1,n=!1;return this.g.beginPath(),this.g.arc(this.centerPoint[0],this.centerPoint[1],this.config.radius,0,2*Math.PI),this.g.isPointInPath(t,i)&&(e=!0),this.g.beginPath(),this.g.arc(this.centerPoint[0],this.centerPoint[1],this.config.radius-this.config.width,0,2*Math.PI),this.g.isPointInPath(t,i)||(n=!0),n&&e},i.prototype.paintTipCase=function(t,i,e){return this.drawCenterCircle(),this.isInAnnular(t,i)&&(this.g.fillStyle="rgba(0, 0, 0, 0.5)",e&&(this.g.fillRect(t,i-60,110,50),this.g.font="12px serif",this.g.fillStyle="#fff",this.g.fillText("lable: "+e.label,t+10,i-45),this.g.fillText("data: "+e.ele.value,t+10,i-30),this.g.fillText("ratio: "+e.ele.ratio,t+10,i-15))),this},i}(p),x=function(){function t(t,i){if(this.g=null,this.config=null,this.defaultRadius=200,this.length=0,this.data=[],this.items=[],this.itemList=[],this.radarSystem=null,this.g=t,this.config=i,void 0===this.config.index)return console.warn("'index' option is required."),null;this.defaultRadius=void 0===this.config.defaultRadius?this.defaultRadius:this.config.defaultRadius,this.config.defaultRadius=this.defaultRadius,this.length=this.config.index.length,this.config.centerX=this.config.canvasWidth/2,this.config.centerY=this.config.canvasHeight/2,this.bindMouseEvent(),this.indexItem(this.config.items)}return t.prototype.sortItem=function(t){return t.sort(function(t,i){return t.value-i.value}),this},t.prototype.indexItem=function(t){return t.map(function(t,i){t.index=i}),this},t.prototype.isInChart=function(t,i){},t.prototype.drawRadarNet=function(t){return this.radarSystem.render(),this},t.prototype.analyseItems=function(t,i){},t.prototype.bindMouseEvent=function(){},t.prototype.renderResult=function(t){},t.prototype.paintTipCase=function(t,i,e){},t.prototype.mouseSelect=function(t,i,e){},t.prototype.reRender=function(t,i){this.g.save(),this.drawRadarNet(this.config.index).renderResult(this.data),this.g.restore()},t.prototype.render=function(t){var i=this;return this.items=[],this.data=[],t?t.map(function(t){i.config.items.map(function(e){e.label===t&&i.items.push(e)})}):this.items=this.config.items,this.sortItem(this.items),this.g.clearRect(0,0,this.config.canvasWidth,this.config.canvasHeight),this.radarSystem=new l(this.g,this.config,this.items),this.itemList=t,this.items.map(function(t,e){i.data.push({ele:i.analyseItems(t,e),color:t.color,label:t.label})}),this.reRender(0,0),this},t}(),v=new(function(){function t(){this.fn={},this.configuration=i,this.fn={drawLine:function(t,i,e,n){return new o(t,i,e,n)},animate:c}}return t.prototype.changeItem=function(t,i,e){var n=t.getAttribute("data-item");t.className.indexOf("active")>-1?(t.classList.remove("active"),i.push(n)):(t.classList.add("active"),i.splice(i.indexOf(n),1)),e.chartIntance.render(i)},t.prototype.createTagItem=function(t,i,e,n){var s=document.createElement("li"),o=document.createElement("span"),r=document.createElement("span"),h=this;return s.setAttribute("data-item",t),o.classList.add("tag"),o.style.backgroundColor=i,r.classList.add("label"),r.innerHTML=t,s.appendChild(o),s.appendChild(r),s.addEventListener("click",function(t){h.changeItem(this,e,n)}),s},t.prototype.addCondition=function(t,i){var e=this,n=document.createElement("h2"),s=document.createElement("canvas"),o=document.createElement("ul"),r=i.items.map(function(t){return t.label});return t.classList.add("chartUp-container"),n.innerHTML=i.title?i.title:"",o.classList.add("tag-con"),i.items.map(function(t){o.appendChild(e.createTagItem(t.label,t.color,r,i))}),t.appendChild(n),t.appendChild(s),t.appendChild(o),s.width=s.offsetWidth,s.height=s.offsetHeight,i.canvas=s,i.canvasWidth=s.offsetWidth,i.canvasHeight=s.offsetHeight,s.getContext("2d")},t.prototype.config=function(t){this.configuration=Object.assign(this.configuration,t)},t.prototype.extend=function(t){return t.chartType?t.chartClass?void(this[t.chartType]=function(i,e){var n=this.addCondition(document.querySelector(i),e);e.chartType=t.chartType,e.chartIntance=new t.chartClass(n,e).render(null)}):(console.warn("'chartClass' option is required."),!1):(console.warn("'chartType' option is required."),!1)},t}());return v.extend({chartType:"BaseChart",chartClass:g}),v.extend({chartType:"PointChart",chartClass:u}),v.extend({chartType:"PillarChart",chartClass:d}),v.extend({chartType:"LineChart",chartClass:y}),v.extend({chartType:"AreaChart",chartClass:f}),v.extend({chartType:"PieChart",chartClass:p}),v.extend({chartType:"AnnularChart",chartClass:m}),v.extend({chartType:"RadarChart",chartClass:x}),t.Chart=v,v}(window);